<section class="glass rounded-2xl p-6">
  <h3 class="text-lg font-semibold mb-3">Static Color</h3>
  <div class="flex items-center gap-4">
    <input id="colorPicker" type="color" value="#ffffff" class="w-16 h-16 border-0 rounded-full">
    <div class="flex-1 grid grid-cols-3 gap-2">
      <div><label class="text-xs opacity-70">R</label><input id="r" type="range" min="0" max="255" value="255" class="w-full"></div>
      <div><label class="text-xs opacity-70">G</label><input id="g" type="range" min="0" max="255" value="255" class="w-full"></div>
      <div><label class="text-xs opacity-70">B</label><input id="b" type="range" min="0" max="255" value="255" class="w-full"></div>
    </div>
  </div>
  <button id="btnColor" class="mt-4 px-5 py-2 pill bg-indigo-500 hover:bg-indigo-400 text-white">Set Color</button>
</section>
<script>
function hexToRgb(hex){hex=hex.replace('#','');if(hex.length===3)hex=hex.split('').map(x=>x+x).join('');const num=parseInt(hex,16);return[(num>>16)&255,(num>>8)&255,num&255];}
function rgbToHex(r,g,b){const h=(x)=>('0'+x.toString(16)).slice(-2);return '#'+h(r)+h(g)+h(b);}
const colorPicker=document.getElementById('colorPicker');
const r=document.getElementById('r');const g=document.getElementById('g');const b=document.getElementById('b');
function syncFromPicker(){const [R,G,B]=hexToRgb(colorPicker.value);r.value=R;g.value=G;b.value=B;}
function syncFromSliders(){colorPicker.value=rgbToHex(parseInt(r.value),parseInt(g.value),parseInt(b.value));}
colorPicker.addEventListener('input', syncFromPicker);[r,g,b].forEach(el=>el.addEventListener('input', syncFromSliders));
async function post(path, body){const res=await fetch(path,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});if(!res.ok){alert('Request failed');}}
document.getElementById('btnColor').onclick=async()=>{await post(`/api/node/{{ node.id }}/color`,{r:parseInt(r.value),g:parseInt(g.value),b:parseInt(b.value)});};
</script>
