{% extends "base.html" %}
{% block content %}
<div class="mb-6 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
  <h2 class="text-2xl font-semibold">Locations</h2>
  <div class="flex items-center gap-2">
    <a href="/admin" class="px-4 py-2 pill bg-slate-700 hover:bg-slate-600">Admin Panel</a>
    <button id="allOff" class="px-4 py-2 pill bg-rose-600 hover:bg-rose-500">All Off</button>
  </div>
</div>

<div class="grid md:grid-cols-3 gap-4 mt-6">
  {% for h in houses %}
  <a href="/house/{{ h.id }}" class="glass rounded-xl p-4 block hover:ring-2 hover:ring-indigo-400">
    <div class="text-xl font-semibold">{{ h.name }}</div>
    <div class="opacity-60 text-xs mt-2">ID: {{ h.id }}</div>
    <div class="text-sm mt-2">{{ h.rooms|length }} rooms</div>
  </a>
  {% endfor %}
</div>

<script>
document.getElementById('allOff').onclick = async () => {
  const res = await fetch('/api/all-off', {method:'POST'});
  if(!res.ok){ alert('Failed to turn all off'); }
};
</script>
{% endblock %}
