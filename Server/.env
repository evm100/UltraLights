# UltraLights server configuration

# ---------------------------------------------------------------------------
# Web server
# ---------------------------------------------------------------------------
WEB_HOST=0.0.0.0
WEB_PORT=443
PUBLIC_BASE=https://lights.example.com
LAN_PUBLIC_BASE=

# TLS certificates (set only when TLS termination happens here)
SSL_CERTFILE=/etc/letsencrypt/live/lights.example.com/fullchain.pem
SSL_KEYFILE=/etc/letsencrypt/live/lights.example.com/privkey.pem

# ---------------------------------------------------------------------------
# MQTT broker
# ---------------------------------------------------------------------------
BROKER_HOST=127.0.0.1
BROKER_PORT=1883
EMBED_BROKER=0

# ---------------------------------------------------------------------------
# Firmware updates & API security
# ---------------------------------------------------------------------------
FIRMWARE_DIR=/srv/firmware/UltraLights
API_BEARER=replace-with-long-random-bearer
MANIFEST_HMAC_SECRET=replace-with-64-char-hex-key

# ---------------------------------------------------------------------------
# Authentication, sessions & limits
# ---------------------------------------------------------------------------
DATA_DIR=/srv/ultralights
AUTH_DB_URL=sqlite:////srv/ultralights/auth.sqlite3
SESSION_SECRET=replace-with-long-random-string
INITIAL_ADMIN_USERNAME=
INITIAL_ADMIN_PASSWORD=
MAX_HOUSE_ID_LENGTH=64
LOGIN_ATTEMPT_LIMIT=5
LOGIN_ATTEMPT_WINDOW=300
LOGIN_BACKOFF_SECONDS=900

# ---------------------------------------------------------------------------
# Optional compatibility topics for legacy firmware
# ---------------------------------------------------------------------------
MQTT_COMPAT_PUBLISH_BOTH=1
LEGACY_TOPIC_COLOR=strip/cmd/color
LEGACY_TOPIC_EFFECT=strip/cmd/effect
LEGACY_TOPIC_SPACEY=strip/cmd/spacey
LEGACY_TOPIC_OTA=strip/cmd/ota
